{
  "version": 3,
  "sources": ["../lib/config.js", "../lib/ui.js", "../index.js"],
  "sourcesContent": ["export const url = \"http://localhost:8000\";", "//Affichage de la cat\u00E9gorie de l'image\r\nimport {url} from \"./config.js\";\r\n//Affichage des \u00E9v\u00E9nements courants\r\nexport async function displayEventsMoisCourant() {\r\n    const eventList = document.getElementById('event-list');\r\n    eventList.innerHTML = 'Chargement...';\r\n\r\n    const response = await fetch(`${url}/api/evenements`);\r\n    const data = await response.json();\r\n\r\n    const evenements = data.evenements.map(e => e.evenement);\r\n\r\n    const ajd = new Date();\r\n    const anneeCourante = ajd.getFullYear();\r\n    const moisCourant = String(ajd.getMonth() + 1).padStart(2, '0');\r\n    const currentPrefix = `${anneeCourante}-${moisCourant}`;\r\n\r\n    const filtered = evenements.filter(ev => ev.date_debut.startsWith(currentPrefix));\r\n\r\n    const source = document.getElementById('event-list-template').innerHTML;\r\n    const template = Handlebars.compile(source);\r\n    eventList.innerHTML = template({events: filtered});\r\n}\r\n\r\n//click sur une categorie pour afficher les \u00E9v\u00E9nements\r\nasync function afficherEvenementsParCategorie(id) {\r\n    const eventList = document.getElementById('event-list');\r\n    const catContainer = document.getElementById('categorie-selectionnee');\r\n    eventList.innerHTML = 'Chargement...';\r\n    catContainer.innerHTML = '';\r\n\r\n    try {\r\n        const response = await fetch(`${url}/api/categories/${id}/evenements`);\r\n        const data = await response.json();\r\n\r\n        //On recupere le nom de la cat\u00E9gorie\r\n        const catRes = await fetch(`${url}/api/categories`);\r\n        const catData = await catRes.json();\r\n\r\n        const catObj = catData.categories.find(c => c.categorie.id_categorie == id);\r\n        const categorie = catObj ? catObj.categorie : { libelle: \"Cat\u00E9gorie inconnue\" };\r\n\r\n        const ajd = new Date();\r\n        const anneeCourante = ajd.getFullYear();\r\n        const moisCourant = String(ajd.getMonth() + 1).padStart(2, '0');\r\n        const currentPrefix = `${anneeCourante}-${moisCourant}`;\r\n        const filtered = data.evenements\r\n            .map(e => e.evenement)\r\n            .filter(ev => ev.date_debut.startsWith(currentPrefix));\r\n\r\n        const catSource = document.getElementById('categorie-selectionnee-template').innerHTML;\r\n        const catTemplate = Handlebars.compile(catSource);\r\n        catContainer.innerHTML = catTemplate(categorie);\r\n        catContainer.innerHTML = `\r\n        <a href=\"#\" id=\"reset-filtre\">Tout r\u00E9afficher</a>\r\n        ${catTemplate(categorie)}`;\r\n        //On ajoute un listener pour le lien de r\u00E9initialisation du filtre\r\n        document.getElementById('reset-filtre').onclick = async (e) => {\r\n            e.preventDefault();\r\n            selectedCategoryId = null;\r\n            document.getElementById('categorie-selectionnee').innerHTML = '';\r\n            await displayEventsMoisCourant();\r\n        };\r\n\r\n        if (filtered.length > 0) {\r\n            const source = document.getElementById('event-list-template').innerHTML;\r\n            const template = Handlebars.compile(source);\r\n            eventList.innerHTML = `\r\n        ${template({ events: filtered })}\r\n    `;\r\n        } else {\r\n            eventList.innerHTML = \"Aucun \u00E9v\u00E9nement pour ce mois dans cette cat\u00E9gorie.\";\r\n        }\r\n    } catch (err) {\r\n        eventList.textContent = \"Erreur lors du chargement des \u00E9v\u00E9nements\";\r\n        catContainer.innerHTML = '';\r\n    }\r\n}\r\n\r\n//Affichage de la liste des cat\u00E9gories\r\nlet selectedCategoryId = null;\r\n\r\nexport async function afficherCategories() {\r\n    const container = document.getElementById('categories-list');\r\n    container.innerHTML = 'Chargement...';\r\n\r\n    try {\r\n        const res = await fetch(`${url}/api/categories`);\r\n        const data = await res.json();\r\n\r\n        const source = document.getElementById('categories-list-template').innerHTML;\r\n        const template = Handlebars.compile(source);\r\n        container.innerHTML = template({ categories: data.categories });\r\n\r\n        container.querySelectorAll('a[data-id]').forEach(lien => {\r\n            const id = lien.getAttribute('data-id');\r\n            lien.onclick = async (e) => {\r\n                e.preventDefault();\r\n                if (selectedCategoryId !== id) {\r\n                    selectedCategoryId = id;\r\n                    await afficherEvenementsParCategorie(id);\r\n                }\r\n            };\r\n        });\r\n    } catch (err) {\r\n        container.textContent = \"Erreur lors du chargement des cat\u00E9gories\";\r\n    }\r\n}", "import { url } from './lib/config.js';\r\n\r\nimport { displayEventsMoisCourant } from \"./lib/ui.js\";\r\nimport { afficherCategories } from \"./lib/ui.js\";\r\n\r\n\r\nwindow.addEventListener('DOMContentLoaded', afficherCategories);\r\nwindow.addEventListener('DOMContentLoaded', displayEventsMoisCourant());\r\n"],
  "mappings": "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",
  "names": []
}
